
<div class="pageCentering">

  <h2 id="title">Scoring Profile</h2>
  
  <div style="height:30px;">
    <span class="filters"> <input (keyup)="applyFilter($event)" placeholder="Filter by Course" #input></span>
    <span class="filters"><input (keyup)="applyFilter($event)" placeholder="Filter by Year" #input></span>
    <span class="filters"> <input (keyup)="applyFilter($event)" placeholder="Filter by Counting Rounds" #input></span>
    <span class="filters"><input (keyup)="applyFilter($event)" placeholder="Filter All" #input></span>
   </div>
  <div class="mat-elevation-z8">



   <table mat-table [dataSource]="dataSource" matSort multiTemplateDataRows 
   (matSortChange)="announceSortChange($event)"
    matSortActive="date" matSortDirection="desc"
    class="mat-elevation-z8">

    <ng-container matColumnDef="expand">
      <th mat-header-cell *matHeaderCellDef aria-label="row actions">&nbsp;</th>
      <td mat-cell *matCellDef="let element" >
        <button mat-icon-button aria-label="expand row" 
        (click)="getCoursebyId(element.courseid, element.teeid)"
        (click)="(expandedElement = expandedElement === element ? null : element); $event.stopPropagation()"
        >
          <mat-icon *ngIf="expandedElement !== element">keyboard_arrow_down</mat-icon>
          <mat-icon *ngIf="expandedElement === element">keyboard_arrow_up</mat-icon>
        </button>
      </td>
    </ng-container>

    <ng-container matColumnDef="expandedDetail">
      <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplayWithExpand.length">
    
        <div class="example-element-detail"
             [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">

          <!-- <div class="example-element-diagram">
          

            <div class="example-element-position"> {{element.position}} </div>
            <div class="example-element-symbol"> {{element.symbol}} </div>
            <div class="example-element-name"> {{element.name}} </div>
            <div class="example-element-weight"> {{element.weight}} </div> 
          </div> -->
          <div class="example-element-description">
            <hr style="width:100%;height:4px;color:darkslategray">
            <table>
              <tr style="font-size: 24px; font-family:'Roboto'; font-weight: bold;height: 30px;" >             
                <td>{{element.name}}</td>
              </tr>
              <tr style="font-size: 16px; font-weight:bold;height:50px; ">
                <td>  Course: {{element.coursename}}</td>
              </tr>
            </table>

            <table class="scoreTable">
 
              <tr class="stTr">
                <th class="stWider">HOLE</th>
                <th>1</th>
                <th>2</th>
                <th>3</th>
                <th>4</th>
                <th>5</th>
                <th>6</th>
                <th>7</th>
                <th>8</th>
                <th>9</th>
                <th class="stWider">OUT</th>
                <th>10</th>
                <th>11</th>
                <th>12</th>
                <th>13</th>
                <th>14</th>
                <th>15</th>
                <th>16</th>
                <th>17</th>
                <th>18</th>
                <th class="stWider">IN</th>
                <th style="padding-left:10px;padding-right:10px;">TOT</th>
              </tr>
              <!-- <hr style="width:100%;height:10px;color:lightcoral; margin: 0px;"> -->
              <tr>
                <td class="stWider">Yds</td>
                <td>{{course?.yd1}}</td>
                <td>{{course?.yd2}}</td>
                <td>{{course?.yd3}}</td>
                <td>{{course?.yd4}}</td>
                <td>{{course?.yd5}}</td>
                <td>{{course?.yd6}}</td>
                <td>{{course?.yd7}}</td>
                <td>{{course?.yd8}}</td>
                <td>{{course?.yd9}}</td>
                <td class="stWider">{{course?.front9y}}</td>
                <td>{{course?.yd10}}</td>
                <td>{{course?.yd11}}</td>
                <td>{{course?.yd12}}</td>
                <td>{{course?.yd13}}</td>
                <td>{{course?.yd14}}</td>
                <td>{{course?.yd15}}</td>
                <td>{{course?.yd16}}</td>
                <td>{{course?.yd17}}</td>
                <td>{{course?.yd18}}</td>
                <td class="stWider">{{course?.back9y}}</td>
                <td>{{course?.totaly}}</td>
              </tr>
              <tr>
                <td class="stWider">Par</td>
                <td>{{course?.p1}}</td>
                <td>{{course?.p2}}</td>
                <td>{{course?.p3}}</td>
                <td>{{course?.p4}}</td>
                <td>{{course?.p5}}</td>
                <td>{{course?.p6}}</td>
                <td>{{course?.p7}}</td>
                <td>{{course?.p8}}</td>
                <td>{{course?.p9}}</td>
                <td class="stWider">{{course?.front9p}}</td>
                <td>{{course?.p10}}</td>
                <td>{{course?.p11}}</td>
                <td>{{course?.p12}}</td>
                <td>{{course?.p13}}</td>
                <td>{{course?.p14}}</td>
                <td>{{course?.p15}}</td>
                <td>{{course?.p16}}</td>
                <td>{{course?.p17}}</td>
                <td>{{course?.p18}}</td>
                <td class="stWider">{{course?.back9p}}</td>
                <td style="width:calc(5.5%)">{{course?.totalp}}</td>
              </tr>
              <tr>
                <td class="stWider">Score</td>
                <td>{{element.s1}}</td>
                <td>{{element.s2}}</td>
                <td>{{element.s3}}</td>
                <td>{{element.s4}}</td>
                <td>{{element.s5}}</td>
                <td>{{element.s6}}</td>
                <td>{{element.s7}}</td>
                <td>{{element.s8}}</td>
                <td>{{element.s9}}</td>
                <td class="stWider">{{element.f9tot}}</td>
                <td>{{element.s10}}</td>
                <td>{{element.s11}}</td>
                <td>{{element.s12}}</td>
                <td>{{element.s13}}</td>
                <td>{{element.s14}}</td>
                <td>{{element.s15}}</td>
                <td>{{element.s16}}</td>
                <td>{{element.s17}}</td>
                <td>{{element.s18}}</td>
                <td class="stWider">{{element.b9tot}}</td>
                <td style="width:calc(5.5%)">{{element.gtotal}}</td>
              </tr>
            </table>

            <hr style="width:100%;height:4px;color:darkslategray">







            <!-- {{element.ntotal}}
            <span class="example-element-description-attribution"> -- Wikipedia </span> -->
          </div>
        </div>
      </td>
    </ng-container>
  
    <!-- Position Column -->
    <!-- <ng-container matColumnDef="Round">
      <th mat-header-cell *matHeaderCellDef> No. </th>
      <td mat-cell *matCellDef="let element; let i=index"> {{i+1}} </td>
    </ng-container> -->
  
    <!-- Date Column -->
    <ng-container matColumnDef="date">
      <th mat-header-cell *matHeaderCellDef  mat-sort-header> Date </th>
      <td mat-cell *matCellDef="let element"> {{element.date | date : shortDate}} </td>
    </ng-container>
  
    <!-- Coursename Column -->
    <ng-container matColumnDef="coursename">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Course </th>
      <td mat-cell *matCellDef="let element"> {{element.coursename}} </td>
    </ng-container>
  
    <!-- Tee Column -->
    <ng-container matColumnDef="Tee">
      <th mat-header-cell *matHeaderCellDef> Tee</th>
      <td mat-cell *matCellDef="let element"> {{element.teename}} </td>
    </ng-container>

       <!-- Gross Column -->
    <ng-container matColumnDef="gtotal">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Gross </th>
      <td mat-cell *matCellDef="let element"> {{element.gtotal}} </td>
    </ng-container>

       <!-- Net Column -->
    <ng-container matColumnDef="Net">
      <th mat-header-cell *matHeaderCellDef> Net </th>
      <td mat-cell *matCellDef="let element"> {{element.ntotal}} </td>
    </ng-container>

       <!-- Hdcp Column -->
    <ng-container matColumnDef="Hdcp">
      <th mat-header-cell *matHeaderCellDef> Hdcp </th>
      <td mat-cell *matCellDef="let element"> {{element.handicap | number :'1.2-2'}} </td>
    </ng-container>

       <!-- Slope Column -->
    <ng-container matColumnDef="Slope">
      <th mat-header-cell *matHeaderCellDef> Slope </th>
      <td mat-cell *matCellDef="let element"> {{element.slope}} </td>
    </ng-container>

       <!-- Rating Column -->
    <ng-container matColumnDef="Rating">
      <th mat-header-cell *matHeaderCellDef> Rating </th>
      <td mat-cell *matCellDef="let element"> {{element.rating}} </td>
    </ng-container>

       <!-- Handicap Column -->
    <ng-container matColumnDef="hc">
      <th mat-header-cell *matHeaderCellDef> Handicap </th>
      <td mat-cell *matCellDef="let element let i=index"> {{element.hc | number :'1.2-2'}} </td>
    </ng-container>

       <!-- Handicap Index Column -->
    <ng-container matColumnDef="hci">
      <th mat-header-cell *matHeaderCellDef> HCI </th>
      <td mat-cell *matCellDef="let element let i=index"> {{element.hci | number :'1.2-2'}} </td>
    </ng-container>

      <!-- Handicap Index Column -->
     <ng-container matColumnDef="year">
      <th mat-header-cell *matHeaderCellDef> Year </th>
      <td mat-cell *matCellDef="let element let i=index"> {{element.year}} </td>
     </ng-container>

      <!-- Handicap Index Column -->
      <ng-container matColumnDef="g_topar">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> + - </th>
        <td mat-cell *matCellDef="let element let i=index"
        [ngClass]="{'over' : element.g_topar > 0, 'under': element.g_topar < 0}"
        >{{element.g_topar}}</td>
      </ng-container>

       <!-- counter Column -->
    <!-- <ng-container matColumnDef="counter">
      <th mat-header-cell *matHeaderCellDef> Counter </th>
      <td mat-cell *matCellDef="let element let i=index"> {{element.counter}} </td>
    </ng-container> -->
    <div style="width:80%">
   
      <tr mat-header-row *matHeaderRowDef="columnsToDisplayWithExpand"></tr>
      <tr mat-row *matRowDef="let element; columns: columnsToDisplayWithExpand;"
      class="example-element-row"
      [class.example-expanded-row]="expandedElement === element"
      [ngClass]="{'cPeach' : element.counter, 'cBlank': !element.counter}"
      (click)="expandedElement = expandedElement === element ? null : element"
      (click)="getCoursebyId(element.courseid, element.teeid)">
      </tr>
      <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>

    </div>
  </table> 
  <mat-paginator [pageSizeOptions]="[20,50,100,250]" [length]="resultsLength" [pageSize]="20" aria-label="Select page of Scores"></mat-paginator>
  </div>
  
  
  <!-- 
  <table>
    <tr>
      <th>Round</th>
      <th>Date</th>
      <th>Course</th>
      <th>Tee</th>
      <th>Gross</th>
      <th>Net</th>
      <th>Hdcp</th>
      <th>Slope</th>
      <th>Rating</th>
      <th>HCI</th>
    </tr>
  
    <tr *ngFor="let x of scores | sortgrid: 'date' index as j" [ngClass]="countingRound(x?.rn || j+1000)">
      <td>{{j + 1}}</td>
      <td>{{x.date | date : shortDate}}</td>
      <td>{{x.coursename}}</td>
      <td>{{x.teename}}</td>
      <td>{{x.gtotal}}</td>
      <td>{{x.ntotal}}</td>
      <td>{{x.handicap | number :'1.2-2'}}</td>
      <td>{{x.slope}}</td>
      <td>{{x.rating}}</td>
      <td>{{hcArray[j].handicapIndex | number :'1.2-2'}}</td>
    </tr>
  </table> -->